-- 创建测试表
CREATE TABLE test_table (
    id SERIAL PRIMARY KEY,
    data TEXT
);

ALTER TABLE test_table ENABLE DELETEBACKUP;

INSERT INTO test_table (data) VALUES ('test data 1');
INSERT INTO test_table (data) VALUES ('test data 2');

-- 删除数据
DELETE FROM test_table WHERE id =1;

SELECT * FROM test_table;
-- 检查备份表
SELECT * FROM pg_backup_01;

-- 启用 DELETEBACKUP 功能
ALTER TABLE test_table DISABLE DELETEBACKUP;

DROP TABLE test_table;



-- 创建测试表
CREATE TABLE test_table (
    id SERIAL PRIMARY KEY,
    name TEXT,
    age INT
);

-- 启用 DELETEBACKUP
ALTER TABLE test_table ENABLE DELETEBACKUP;

-- 插入数据
INSERT INTO test_table (name, age) VALUES ('Alice', 30), ('Bob', 25);

-- 删除数据并检查备份
DELETE FROM test_table WHERE name = 'Alice';
SELECT * FROM test_table_backup;

-- 禁用 DELETEBACKUP
ALTER TABLE test_table DISABLE DELETEBACKUP;

